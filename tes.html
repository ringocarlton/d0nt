<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>d0nt.blinkk OS</title>
<link rel="icon" href="favicon.png" type="image/png">
<style>
  :root {
    --bg-dark: linear-gradient(180deg,#0f1220 0%,#1b2030 100%);
    --accent: rgba(255,255,255,.9);
    --ease: cubic-bezier(.25,.1,.25,1);
  }
  html,body{height:100%;margin:0;font-family:"IBM Plex Mono",monospace;overflow:hidden;background:var(--bg-dark);color:#fff;}
  .desktop{width:100vw;height:100vh;position:relative;overflow:hidden;}
  .icon{position:absolute;width:100px;cursor:grab;text-align:center;display:flex;flex-direction:column;align-items:center;}
  .icon img{width:100px;height:100px;border-radius:12px;object-fit:cover;transition:transform .2s;}
  .icon span{font-size:12px;word-break:break-word;}
  .icon:hover img{transform:scale(1.05);}
  .window{display:none;position:absolute;width:400px;height:300px;background:#111;border-radius:12px;box-shadow:0 20px 50px rgba(0,0,0,.5);overflow:hidden;flex-direction:column;z-index:1000;}
  .window-bar{background:#222;padding:6px 12px;display:flex;justify-content:space-between;align-items:center;cursor:move;}
  .window-bar span{font-weight:600;}
  .window-bar button{background:#333;color:#fff;border:none;border-radius:6px;padding:2px 8px;cursor:pointer;}
  .window-body{padding:12px;flex:1;overflow:auto;}
  #intro-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:2000;}
  #enter-btn{padding:8px 14px;border-radius:8px;border:1px solid #fff;background:transparent;color:#fff;cursor:pointer;}
</style>
</head>
<body>
<div id="intro-overlay">
  <h1>d0nt.blinkk OS</h1>
  <p>Move icons, open windows, explore.</p>
  <button id="enter-btn">Enter</button>
</div>

<div class="desktop" id="desktop"></div>

<!-- Window Template -->
<div class="window" id="windowTemplate">
  <div class="window-bar">
    <span>Title</span>
    <button class="close">Ã—</button>
  </div>
  <div class="window-body">
    <img src="" alt="" style="max-width:100%;border-radius:8px;">
    <p class="meta"></p>
  </div>
</div>

<script>
const desktop = document.getElementById('desktop');
const introOverlay = document.getElementById('intro-overlay');
const enterBtn = document.getElementById('enter-btn');
const windowTemplate = document.getElementById('windowTemplate');

enterBtn.onclick = ()=>{ introOverlay.style.display='none'; }

fetch('images.json')
  .then(r=>r.json())
  .then(images=>images.forEach(addIcon));

function addIcon(item){
  const icon = document.createElement('div');
  icon.className='icon';
  icon.style.left=Math.random()*(window.innerWidth-120)+'px';
  icon.style.top=Math.random()*(window.innerHeight-150)+'px';
  icon.innerHTML=`<img src="images/${item.file}" alt="${item.title}"><span>${item.title}</span>`;
  desktop.appendChild(icon);

  icon.addEventListener('dblclick', ()=>{
    const win = windowTemplate.cloneNode(true);
    win.id='';
    win.querySelector('span').textContent=item.title;
    win.querySelector('img').src=`images/${item.file}`;
    win.querySelector('.meta').innerHTML=`<strong>Year:</strong> ${item.year || '-'}<br><strong>Tools:</strong> ${item.tools?.join(', ') || '-'}`;
    desktop.appendChild(win);
    win.style.display='flex';
    win.style.left='50px';
    win.style.top='50px';

    const closeBtn = win.querySelector('.close');
    closeBtn.onclick = ()=>win.remove();

    // simple drag for window
    const bar = win.querySelector('.window-bar');
    let isDragging=false, offsetX=0, offsetY=0;
    bar.onpointerdown=(e)=>{
      isDragging=true;
      offsetX=e.clientX - win.offsetLeft;
      offsetY=e.clientY - win.offsetTop;
    }
    document.onpointermove=(e)=>{ if(isDragging){ win.style.left=e.clientX-offsetX+'px'; win.style.top=e.clientY-offsetY+'px'; } }
    document.onpointerup=()=>isDragging=false;
  });
}
</script>
</body>
</html>
